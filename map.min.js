var markers={icon_base:"images/markers/",materials:{Salt:{icon:"salt.png",size:[30,40],coords:[[3E3,3E3],[3E3,4E3]]},"Hull Fragment":{icon:"hull_fragment.png",size:[30,40],coords:[[2E3,3E3]]},"Bractus Resin":{icon:"bractus_resin.png",size:[30,40],coords:[[4E3,3E3],[4E3,3500],[4E3,4E3]]}}},p0_crs=L.extend({},L.CRS.Simple,{transformation:new L.Transformation(.03125,0,.03125,0)}),bounds=[[362,0],[7832,8192]],map=L.map("map",{crs:p0_crs,maxBounds:bounds}).fitBounds(bounds);
L.tileLayer("images/map/{z}/{x}/{y}.jpg",{minZoom:2,maxZoom:5,noWrap:!0,bounds:bounds}).addTo(map);if(-1!==window.location.search.search("debug"))L.marker([3E3,3E3],{draggable:!0}).bindPopup("").addTo(map).on("moveend",function(a){a=a.target;a.getPopup().setContent(a.getLatLng().toString());a.openPopup()});var overlays=[],materialLayers={},key;
for(key in markers.materials){var material=markers.materials[key],layerGroup=L.layerGroup(),coords;for(coords in material.coords)coords=material.coords[coords],layerGroup.addLayer(L.marker(coords,{icon:L.icon({iconUrl:markers.icon_base+material.icon,iconSize:material.size}),alt:key}));materialLayers[key]=layerGroup}overlays.push({groupName:"Materials",expanded:!0,layers:materialLayers});
var control=L.Control.styledLayerControl(null,overlays,{collapsed:!1,group_togglers:{show:!0,labelAll:"All",labelNone:"None"},container_width:"200px"}).addTo(map),quadrantPopup=L.popup();map.on("click",function(a){isInBounds(a.latlng)&&quadrantPopup.setLatLng(a.latlng).setContent("<p>Quadrant: "+getQuadrant(a.latlng)+"</p>").openOn(map)});function getQuadrant(a){var b=Math.floor((a.lat-395)/370);a=Math.floor((a.lng-16)/370)+1;b=Math.abs(b-19)+65;return String.fromCharCode(b)+" "+a}
function isInBounds(a){return a.lat>bounds[0][0]&&a.lng>bounds[0][1]&&a.lat<bounds[1][0]&&a.lng<bounds[1][1]};
